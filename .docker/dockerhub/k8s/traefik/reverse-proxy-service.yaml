apiVersion: v1
kind: Service
metadata:
  annotations:
    traefik.http.routers.http-catchall.entrypoints: web
    traefik.http.routers.http-catchall.middlewares: redirect-to-https
    traefik.http.routers.http-catchall.rule: hostregexp(`{host:.+}`)
    traefik.http.routers.traefik.entrypoints: websecure
    traefik.http.routers.traefik.rule: Host(`localhost`)
    traefik.http.routers.traefik.service: api@internal
    traefik.http.routers.traefik.tls.certresolver: letsencrypt
  labels:
    io.kompose.service: reverse-proxy
  name: reverse-proxy
spec:
  type: LoadBalancer
  ports:
    - name: "80"
      protocol: TCP
      port: 80
      targetPort: 80
    - name: "443"
      protocol: TCP
      port: 443
      targetPort: 443
    - name: "8000"
      protocol: TCP
      port: 8000
      targetPort: 8080
  selector:
    io.kompose.service: reverse-proxy
status:
  loadBalancer: {}
